# 3.3 Balises standardisées du MML : Ontologie documentaire universelle

## Le lexique sémantique fondamental

### Classification taxonomique des balises

Les balises MML sont organisées selon une **taxonomie hiérarchique** qui reflète les structures documentaires universelles. Cette organisation n'est pas arbitraire ; elle découle de l'analyse de millions de documents et de patterns structurels récurrents.

## Catégorie 1 : Structure documentaire

### Titres et hiérarchie (`#H1` à `#H6`)

**Sémantique** : Représentent les niveaux hiérarchiques du contenu, de l'importance maximale (`#H1`) à l'importance minimale (`#H6`).

**Usage** :
```
#H1 Titre principal du document
#H2 Section majeure
#H3 Sous-section
#H4 Paragraphe important
#H5 Détail notable
#H6 Note mineure
```

**Règles de hiérarchie** :
- Pas de saut de niveau (éviter `#H1` suivi directement de `#H3`)
- Chaque niveau inférieur doit être contenu dans un supérieur
- Utilisation cohérente dans tout le document

### Sections et divisions (`#SECTION`, `#DIV`, `#ARTICLE`)

**Sémantique** : Délimitent des zones logiques dans le document.

```
#SECTION[id="introduction"]
  #H1 Introduction
  #P Contenu introductif

#ARTICLE[class="post"]
  #H1 Titre de l'article
  #P Corps de l'article

#DIV[class="sidebar"]
  #H2 Informations complémentaires
```

**Différences sémantiques** :
- `#SECTION` : Division thématique autonome
- `#ARTICLE` : Contenu indépendant redistribuable
- `#DIV` : Conteneur générique de présentation

## Catégorie 2 : Contenu textuel

### Blocs de texte (`#P`, `#BLOCKQUOTE`, `#PRE`)

**Paragraphe (`#P`)** :
- **Sémantique** : Unité discursive de base
- **Usage** : Texte continu formant une idée complète
- **Exemple** : `#P Ceci est un paragraphe standard.`

**Citation (`#BLOCKQUOTE`)** :
- **Sémantique** : Contenu cité d'une source externe
- **Attributs** : `[cite="/source"]` pour la référence
- **Exemple** : `#BLOCKQUOTE[citation="Auteur, 2024"] Texte cité...`

**Texte préformaté (`#PRE`)** :
- **Sémantique** : Contenu où l'espacement doit être préservé
- **Usage** : Code, poésie, tableaux ASCII
- **Exemple** : `#PRE   Code indenté`

### Texte inline formaté (`#STRONG`, `#EM`, `#CODE`, `#MARK`)

**Emphase forte (`#STRONG`)** :
- **Sémantique** : Importance ou urgence
- **Rendu typique** : Gras
- **Exemple** : `Texte #STRONG très important`

**Emphase légère (`#EM`)** :
- **Sémantique** : Accent ou stress
- **Rendu typique** : Italique
- **Exemple** : `Ceci est #EM particulièrement vrai`

**Code inline (`#CODE`)** :
- **Sémantique** : Fragment de code informatique
- **Usage** : Variables, fonctions, commandes
- **Exemple** : `Utilisez la fonction #CODE print()`

**Texte marqué (`#MARK`)** :
- **Sémantique** : Surlignage pour attirer l'attention
- **Usage** : Résultats de recherche, annotations
- **Exemple** : `#MARK terme recherché`

## Catégorie 3 : Listes et énumérations

### Listes non ordonnées (`#UL`, `#LI`)

**Structure** :
```
#UL
  #LI Premier élément
  #LI Deuxième élément avec #STRONG emphase
  #LI Troisième élément
```

**Sémantique** : Collection d'éléments sans ordre particulier.

### Listes ordonnées (`#OL`, `#LI`)

**Structure** :
```
#OL
  #LI[value="1"] Premier élément
  #LI[value="2"] Deuxième élément
  #LI[value="3"] Troisième élément
```

**Attributs** :
- `value` : Numéro de départ ou spécifique
- `type` : Style de numérotation (`"1"`, `"A"`, `"a"`, `"I"`)

### Listes de définition (`#DL`, `#DT`, `#DD`)

**Structure** :
```
#DL
  #DT Terme 1
  #DD Définition du terme 1
  #DT Terme 2
  #DD Définition du terme 2, première partie
  #DD Suite de la définition du terme 2
```

**Sémantique** : Associations terme-définition, glossaires, métadonnées.

## Catégorie 4 : Liens et références

### Liens hypertexte (`#LINK`)

**Syntaxe complète** :
```
#LINK[href="/destination"][title="Info-bulle"][rel="nofollow"] Texte du lien
```

**Attributs essentiels** :
- `href` : URL ou référence cible
- `title` : Texte d'aide (tooltip)
- `rel` : Relation sémantique (nofollow, external, etc.)

### Ancres de navigation (`#ANCHOR`)

**Usage** : Points de repère dans le document
```
#ANCHOR[name="section-intro"] Point d'ancrage invisible
```

**Navigation** : `#LINK[href="#section-intro"] Aller à l'introduction`

## Catégorie 5 : Médias et objets

### Images (`#IMG`)

**Syntaxe** :
```
#IMG[src="/chemin/image.jpg"][alt="Description textuelle"][width="300"][height="200"]
```

**Attributs** :
- `src` : Chemin vers l'image
- `alt` : Description accessible (obligatoire)
- `width`/`height` : Dimensions
- `title` : Info-bulle

### Médias temporels (`#VIDEO`, `#AUDIO`)

**Vidéo** :
```
#VIDEO[src="/video.mp4"][controls="true"][autoplay="false"]
  #SOURCE[src="/video.webm"][type="video/webm"]
  #TRACK[kind="subtitles"][src="/subs.vtt"]
```

**Audio** :
```
#AUDIO[src="/audio.mp3"][controls="true"][loop="false"]
```

### Objets génériques (`#OBJECT`, `#EMBED`)

**Pour contenu externe** :
```
#OBJECT[data="/document.pdf"][type="application/pdf"][width="600"][height="400"]
```

## Catégorie 6 : Tableaux et données structurées

### Tableaux (`#TABLE`, `#THEAD`, `#TBODY`, `#TR`, `#TH`, `#TD`)

**Structure complète** :
```
#TABLE[caption="Données mensuelles"]
  #THEAD
    #TR
      #TH Mois
      #TH Ventes
  #TBODY
    #TR
      #TD Janvier
      #TD 15000
    #TR
      #TD Février
      #TD 18000
```

**Attributs** :
- `caption` : Titre du tableau
- `colspan`/`rowspan` : Fusion de cellules

### Données tabulaires (`#CSV`, `#TSV`)

**Pour données brutes** :
```
#CSV[delimiter=","]
Nom,Ville,Âge
Alice,Paris,25
Bob,Lyon,30
```

## Catégorie 7 : Formulaires et interaction

### Éléments de formulaire (`#FORM`, `#INPUT`, `#TEXTAREA`, `#SELECT`)

**Formulaire complet** :
```
#FORM[action="/submit"][method="post"]
  #INPUT[type="text"][name="username"][placeholder="Nom d'utilisateur"][required="true"]
  #TEXTAREA[name="message"][rows="4"][placeholder="Votre message"]
  #SELECT[name="category"]
    #OPTION[value="general"] Général
    #OPTION[value="support"] Support
  #BUTTON[type="submit"] Envoyer
```

### Contrôles spécialisés (`#BUTTON`, `#LABEL`, `#FIELDSET`)

**Boutons** :
```
#BUTTON[type="button"][onclick="action()"] Action personnalisée
#BUTTON[type="reset"] Réinitialiser
```

**Groupement** :
```
#FIELDSET[legend="Informations personnelles"]
  #LABEL[for="name"] Nom :
  #INPUT[id="name"][type="text"]
```

## Catégorie 8 : Métadonnées et annotations

### Métadonnées documentaires (`#META`)

**Informations générales** :
```
#META[title="Titre du document"][author="Auteur"][date="2024-01-15"]
#META[description="Résumé court"][keywords="mot1,mot2"][language="fr"]
```

### Annotations temporelles (`#TIME`)

**Dates et heures** :
```
#TIME[datetime="2024-01-15T10:30:00"] 15 janvier 2024 à 10h30
```

### Informations de contact (`#ADDRESS`)

**Coordonnées** :
```
#ADDRESS
  #P Société XYZ
  #P 123 Rue de la Paix
  #LINK[href="mailto:contact@xyz.com"] contact@xyz.com
```

## Catégorie 9 : Contenu spécialisé

### Citations et références (`#CITE`, `#Q`)

**Citation courte** : `#Q[cite="/source"] phrase citée`

**Référence bibliographique** : `#CITE Titre du livre (Auteur, 2024)`

### Abréviations (`#ABBR`)

**Avec expansion** : `#ABBR[title="HyperText Markup Language"] HTML`

### Contenu généré (`#DETAILS`, `#SUMMARY`)

**Contenu pliable** :
```
#DETAILS
  #SUMMARY Cliquez pour voir les détails
  #P Contenu masqué par défaut
```

## Implémentation des balises : Architecture modulaire

### Noyau sémantique (obligatoire)

Contient les balises essentielles pour tout document :
- `#H1-#H6`, `#P`, `#UL`, `#OL`, `#LI`, `#LINK`, `#IMG`

### Extensions optionnelles

Modules activables selon les besoins :
- **Web** : `#FORM`, `#INPUT`, formulaires interactifs
- **Médias** : `#VIDEO`, `#AUDIO`, contenu riche
- **Données** : `#TABLE`, `#CSV`, structures tabulaires
- **Scientifique** : `#MATH`, `#EQUATION`, formules mathématiques

### Validation sémantique

```python
class SemanticValidator:
    def validate_element(self, element):
        """
        Validation sémantique d'un élément MML
        """
        tag = element.tag
        content = element.content
        attributes = element.attributes

        # Règles spécifiques par balise
        if tag == 'IMG':
            if not attributes.get('alt'):
                raise ValidationError("L'attribut 'alt' est obligatoire pour #IMG")
            if not attributes.get('src'):
                raise ValidationError("L'attribut 'src' est obligatoire pour #IMG")

        elif tag.startswith('H') and tag[1:].isdigit():
            level = int(tag[1:])
            if level < 1 or level > 6:
                raise ValidationError(f"Niveau de titre invalide: {tag}")

        elif tag == 'LINK':
            if not attributes.get('href'):
                raise ValidationError("L'attribut 'href' est obligatoire pour #LINK")

        # Validation générique
        self.validate_attributes(tag, attributes)
        self.validate_content(tag, content)

    def validate_hierarchy(self, document):
        """
        Validation de la hiérarchie documentaire
        """
        headings = []
        for element in document.elements:
            if element.tag.startswith('H') and element.tag[1:].isdigit():
                level = int(element.tag[1:])
                headings.append(level)

        # Vérifier la progression logique
        for i in range(1, len(headings)):
            if headings[i] > headings[i-1] + 1:
                raise ValidationError(f"Saut de hiérarchie détecté: H{headings[i-1]} → H{headings[i]}")
```

## Évolution et extensibilité

### Processus d'ajout de balises

1. **Analyse du besoin** : Cas d'usage justifiant la nouvelle balise
2. **Évaluation de l'universalité** : Applicable à >80% des documents
3. **Définition sémantique** : Signification précise et non-ambiguë
4. **Validation communautaire** : Accord du comité de standardisation
5. **Implémentation** : Ajout dans les parsers de référence

### Balises expérimentales

**Préfixe `X`** pour les balises expérimentales :
- `#XCHART` : Graphiques (expérimental)
- `#XMATH` : Formules mathématiques (expérimental)
- `#XINTERACTIVE` : Contenu interactif (expérimental)

### Obsolescence contrôlée

Les balises dépréciées suivent un cycle :
1. **Marquage déprécié** : Avertissement dans la documentation
2. **Période de transition** : 2 ans de support
3. **Suppression** : Remplacement par équivalent standard

## Conclusion : Une ontologie vivante

Les balises MML ne constituent pas un ensemble figé ; elles représentent une **ontologie vivante** de la structure documentaire. Chaque balise encode des siècles de pratique humaine en matière d'organisation de l'information, des manuscrits médiévaux aux publications académiques modernes.

Cette ontologie est conçue pour être **stable mais évolutive**, conservant l'essentiel tout en s'adaptant aux besoins émergents. Elle transcende les formats technologiques pour capturer les **universaux de la communication humaine**.

Dans un monde où les technologies se succèdent à un rythme effréné, les balises MML offrent une **constance sémantique**, un vocabulaire partagé qui permet à l'humanité de communiquer au-delà des barrières technologiques.
