# 11.3 Exemples conformes : Mise en pratique de la spécification

## Exemples progressifs de complexité croissante

### Exemple 1 : Document minimal conforme

**Niveau de conformité** : C0 (syntaxe basique)

```
#META[title="Document minimal"]
#H1 Titre principal
#P Ceci est un paragraphe simple.
```

**Validation** :
- ✅ Syntaxe correcte
- ✅ Encodage UTF-8
- ✅ Structure de base valide

### Exemple 2 : Document structuré standard

**Niveau de conformité** : C1 (sémantique complète)

```
#META[title="Guide d'urgence"][author="Dr. Dubois"][language="fr"][version="1.0"]
#SECTION[id="introduction"]
  #H1 Guide médical d'urgence
  #P Ce guide présente les gestes essentiels en cas d'urgence médicale.
  #TIME[datetime="2024-01-15"] Mis à jour le 15 janvier 2024

#SECTION[id="hemorragies"]
  #H2 Les hémorragies
  #P Les hémorragies sont classées selon leur origine vasculaire.
  #UL
    #LI #STRONG Artérielle : Sang rouge vif, pulse
    #LI Veineuse : Sang rouge foncé, régulier
    #LI Capillaire : Saignement diffus, lent
```

**Validation** :
- ✅ Syntaxe et sémantique valides
- ✅ Types de données corrects
- ✅ Hiérarchie logique respectée
- ✅ Références cohérentes

### Exemple 3 : Document complexe avec médias

**Niveau de conformité** : C2 (optimisation maximale)

```
#META[title="Guide complet"][author="Équipe médicale"][description="Guide illustré des premiers secours"][hash="a1b2c3d4e5f6789a"]
#H1 Premiers secours illustrés

#SECTION[id="urgence-vitale"]
  #H2 Urgences vitales
  #P En cas d'urgence vitale, évaluez rapidement l'#STRONG ABC : #EM Airway, Breathing, Circulation.

  #FIGURE
    #IMG[src="abc-diagram.jpg"][alt="Diagramme ABC des premiers secours"][width="400"]
    #FIGCAPTION Évaluation rapide des fonctions vitales

#SECTION[id="techniques"]
  #H2 Techniques de base
  #OL
    #LI
      #STRONG Position latérale de sécurité (PLS)
      #P Pour une victime inconsciente qui respire.
      #OL[type="a"]
        #LI Allonger la victime sur le côté
        #LI Relever le genou supérieur
        #LI Vérifier les voies aériennes
    #LI
      #STRONG Massage cardiaque
      #P 100-120 compressions par minute.
      #UL
        #LI Paumes superposées au centre du sternum
        #LI Bras tendus, compressions de 5-6 cm
        #LI Alterner 30 compressions / 2 insufflations
```

**Validation** :
- ✅ Structure canonique optimisée
- ✅ Médias accessibles (attributs alt)
- ✅ Listes correctement imbriquées
- ✅ Hiérarchie respectée
- ✅ Hash d'intégrité présent

### Exemple 4 : Formulaire interactif

```
#FORM[action="/urgence"][method="post"][id="urgence-form"]
  #FIELDSET[legend="Signalement d'urgence"]
    #P Veuillez fournir les informations suivantes :

    #LABEL[for="nom"] Nom complet :
    #INPUT[type="text"][id="nom"][name="nom"][placeholder="Votre nom"][required="true"]

    #LABEL[for="tel"] Téléphone :
    #INPUT[type="tel"][id="tel"][name="tel"][placeholder="06 XX XX XX XX"]

    #LABEL[for="urgence-type"] Type d'urgence :
    #SELECT[name="urgence-type"][required="true"]
      #OPTION[value=""] Sélectionnez...
      #OPTION[value="cardiaque"] Problème cardiaque
      #OPTION[value="respiratoire"] Difficulté respiratoire
      #OPTION[value="traumatisme"] Traumatisme
      #OPTION[value="autre"] Autre

    #LABEL[for="description"] Description :
    #TEXTAREA[name="description"][rows="4"][placeholder="Décrivez la situation..."]

    #BUTTON[type="submit"] Signaler l'urgence
    #BUTTON[type="reset"] Réinitialiser
```

**Validation** :
- ✅ Formulaire complet et fonctionnel
- ✅ Labels associés aux champs
- ✅ Attributs d'accessibilité
- ✅ Types de champs appropriés

### Exemple 5 : Document scientifique avec références

```
#META[title="Étude sur la transmission MML"][author="Dr. Martin"][language="fr"][license="CC-BY-4.0"]
#SECTION[id="abstract"]
  #H1 Transmission de documents structurés en environnements contraints
  #P Cette étude présente le langage MML comme solution pour la transmission de documents complexes via des canaux à faible bande passante.

#SECTION[id="methodologie"]
  #H2 Méthodologie
  #P L'approche combine compression sémantique et codage robuste.

  #DL
    #DT Compression sémantique
    #DD Analyse de la structure logique avant compression binaire
    #DT Codage robuste
    #DD Utilisation de codes correcteurs d'erreurs avancés
    #DT Transmission adaptative
    #DD Sélection automatique du mode selon les conditions

#SECTION[id="resultats"]
  #H2 Résultats expérimentaux
  #TABLE[caption="Performances de compression"]
    #THEAD
      #TR
        #TH Type de document
        #TH Taille originale
        #TH Taille MML
        #TH Ratio
    #TBODY
      #TR
        #TD Article scientifique
        #TD 245 KB
        #TD 89 KB
        #TD 36%
      #TR
        #TD Page web
        #TD 512 KB
        #TD 156 KB
        #TD 30%
      #TR
        #TD Document technique
        #TD 180 KB
        #TD 67 KB
        #TD 37%

#SECTION[id="conclusion"]
  #H2 Conclusion
  #P Le système MML démontre des performances supérieures pour la transmission de documents structurés en environnements contraints.

  #BLOCKQUOTE[citation="RFC 0001"]
    MML est conçu pour résoudre les limitations des langages de balisage traditionnels dans les contextes de transmission contrainte.

  #P #LINK[href="#references"] Voir les références bibliographiques.

#SECTION[id="references"]
  #H2 Références
  #OL
    #LI #CITE "Minimal Markup Language Specification" RFC 0001, 2025
    #LI #CITE "Distributed Network Framework" Technical Report, 2024
    #LI #CITE Morse, S.F.B. "Improvement in the Mode of Communicating Information by Signals" US Patent 1647, 1840
```

**Validation** :
- ✅ Structure scientifique appropriée
- ✅ Tableaux de données complexes
- ✅ Citations et références
- ✅ Liens de navigation interne

### Exemple 6 : Document multilingue

```
#META[title="Guide multilingue"][languages="fr,en,es"]
#H1 Guide d'urgence / Emergency Guide / Guía de emergencia

#SECTION[lang="fr"]
  #H2 En français
  #P Composez le #CODE 15 pour les urgences médicales.

#SECTION[lang="en"]
  #H2 In English
  #P Call #CODE 911 for medical emergencies.

#SECTION[lang="es"]
  #H2 En español
  #P Llame al #CODE 112 para emergencias médicas.

#SECTION[id="international"]
  #H2 Numéros internationaux d'urgence
  #TABLE
    #THEAD
      #TR
        #TH Pays
        #TH Numéro
        #TH Service
    #TBODY
      #TR
        #TD France
        #TD 15
        #TD SAMU
      #TR
        #TD États-Unis
        #TD 911
        #TD Emergency
      #TR
        #TD Espagne
        #TD 112
        #TD Emergencias
```

**Validation** :
- ✅ Attributs de langue appropriés
- ✅ Structure multilingue cohérente
- ✅ Tableaux comparatifs

### Exemple 7 : Document avec sécurité intégrée

```
#META[title="Document confidentiel"][classification="secret"][hash="a1b2c3d4e5f6789a"]
#SECTION[id="header"]
  #H1 Document classifié
  #P[security="encrypted"] Ce document contient des informations sensibles.
  #P[timestamp="2024-01-15T10:30:00Z"] Généré automatiquement.

#SECTION[id="content"]
  #H2 Contenu protégé
  #P[integrity="high"] Les informations suivantes sont critiques :
  #UL
    #LI[confidential="true"] Coordonnées des agents : #CODE Agent-Alpha, position 48.8N 2.3E
    #LI[confidential="true"] Fréquences d'urgence : 7.090 MHz primaire, 3.760 MHz secondaire
    #LI[confidential="true"] Codes d'authentification : #CODE Bravo-7-9-Charlie

#SECTION[id="verification"]
  #H2 Vérification d'intégrité
  #P Document signé numériquement le 15 janvier 2024.
  #P[signature="ed25519:ABC123..."] Empreinte de signature
  #P[key_id="master-key-2024"] Clé de vérification disponible
```

**Validation** :
- ✅ Sécurité intégrée appropriée
- ✅ Attributs de classification
- ✅ Signatures numériques
- ✅ Gestion de confidentialité

### Exemple 8 : Document avec extensions expérimentales

```
#META[title="Document avec extensions"][version="2.0-experimental"]
#H1 Document innovant

#SECTION[id="standard"]
  #H2 Contenu standard
  #P Contenu conforme à la spécification de base.

#SECTION[id="experimental"]
  #H2 Fonctionnalités expérimentales
  #P Ce document utilise des extensions non standardisées.

  #XCHART[type="bar"][data="sales.json"]
    #XDATASET[label="Ventes 2024"]
      #XPOINT[x="Janvier"][y="15000"]
      #XPOINT[x="Février"][y="18000"]

  #XMATH
    #XEQUATION E = mc²
    #XPROOF Démonstration de l'équivalence masse-énergie

  #XINTERACTIVE[type="quiz"]
    #XQUESTION Quelle est la vitesse de la lumière ?
    #XANSWER[value="300000"][correct="true"] 300 000 km/s
    #XANSWER[value="150000"] 150 000 km/s
    #XANSWER[value="600000"] 600 000 km/s
```

**Note** : Les éléments préfixés par `X` sont expérimentaux et peuvent ne pas être supportés par tous les parsers.

## Tests de conformité

### Suite de tests automatisés

#### Test 1 : Validation syntaxique

```python
def test_syntax_validation():
    # Document valide
    valid_doc = "#H1 Test\n#P Paragraphe"
    assert validate_syntax(valid_doc) == True

    # Document invalide
    invalid_doc = "#H1 Test sans fermeture\n#P Paragraphe"
    assert validate_syntax(invalid_doc) == False
```

#### Test 2 : Validation sémantique

```python
def test_semantic_validation():
    # Document sémantiquement correct
    valid_doc = """
    #META[title="Test"]
    #H1 Titre
    #P Paragraphe
    #UL
      #LI Item
    """
    assert validate_semantics(valid_doc) == True

    # Hiérarchie invalide
    invalid_doc = """
    #H1 Titre
    #H3 Sous-titre (saut invalide)
    """
    assert validate_semantics(invalid_doc) == False
```

#### Test 3 : Tests de performance

```python
def test_performance():
    # Génération d'un document de test volumineux
    large_doc = generate_large_test_document(1000)  # 1000 éléments

    start_time = time.time()
    result = parse_and_validate(large_doc)
    end_time = time.time()

    # Doit traiter au moins 100 éléments/seconde
    assert (end_time - start_time) < 10.0
    assert result.is_valid == True
```

## Outils de validation

### Validateur en ligne

**Interface web** : `https://validator.mml.org`
- Upload de documents
- Validation en temps réel
- Rapport détaillé d'erreurs
- Suggestions de corrections

### Bibliothèque de référence

**Package Python** :
```python
from mml_validator import MMLValidator

validator = MMLValidator()
result = validator.validate_file("document.mml")

if result.is_valid:
    print(f"Document conforme niveau {result.conformance_level}")
else:
    for error in result.errors:
        print(f"Erreur ligne {error.line}: {error.message}")
```

### Intégration CI/CD

**Configuration GitHub Actions** :
```yaml
name: MML Validation
on: [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Validate MML documents
        uses: mml-org/validator-action@v1
        with:
          path: docs/
          level: C1
```

## Évolution de la spécification

### Roadmap des versions

#### Version 1.1 (2025)
- Extensions pour les médias riches
- Attributs d'accessibilité étendus
- Support amélioré du multilingue

#### Version 2.0 (2026)
- Intégration des signatures quantiques
- Extensions pour l'IoT
- API de streaming en temps réel

#### Versions expérimentales
- Branches `experimental/*` pour nouvelles fonctionnalités
- Période de test de 6 mois avant standardisation

---

**Note importante** : Ces exemples sont fournis à titre illustratif. Pour une implémentation réelle, consultez toujours la spécification complète et les outils de validation.
